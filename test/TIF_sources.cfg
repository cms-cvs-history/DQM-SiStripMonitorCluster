process TIFDQMSOURCES = {
#keep the logging output to a nice level
include "FWCore/MessageLogger/data/MessageLogger.cfi"

service = AdaptorConfig {}

untracked PSet maxEvents = {untracked int32 input = 100}

source = PoolSource { 
          	untracked vstring fileNames = {

"rfio:/castor/cern.ch/cms/store/data/2007/3/24/TAC-TIBTOB-120-DAQ-EDM-CMSSW_1_3_0_pre6-DIGI-RECO-Run-00006215/DIGI-RECO/0000/72B1C10B-60DB-DB11-B422-003048597D65.root"
/*
"rfio:/castor/cern.ch/cms/store/unmerged/data/2007/3/18/TAC-TIBTOB-120-DAQ-EDM-CMSSW_1_3_0_pre5-DIGI-RECO-Run-00006306/DIGI-RECO/0000/04C9FD4B-9FD5-DB11-A1B9-000E0C4D3C43.root",
"rfio:/castor/cern.ch/cms/store/unmerged/data/2007/3/18/TAC-TIBTOB-120-DAQ-EDM-CMSSW_1_3_0_pre5-DIGI-RECO-Run-00006306/DIGI-RECO/0000/C0862041-9FD5-DB11-A7FD-000E0C4D3679.root"
#run 6306:
"/store/unmerged/data/2007/3/18/TAC-TIBTOB-120-DAQ-EDM-CMSSW_1_3_0_pre5-DIGI-RECO-Run-00006306/DIGI-RECO/0000/04C9FD4B-9FD5-DB11-A1B9-000E0C4D3C43.root",
"/store/unmerged/data/2007/3/18/TAC-TIBTOB-120-DAQ-EDM-CMSSW_1_3_0_pre5-DIGI-RECO-Run-00006306/DIGI-RECO/0000/C0862041-9FD5-DB11-A7FD-000E0C4D3679.root",
#run 6354:
"/store/unmerged/data/2007/3/18/TAC-TIBTOB-120-DAQ-EDM-CMSSW_1_3_0_pre5-DIGI-RECO-Run-00006354/DIGI-RECO/0000/2606226D-A0D5-DB11-9C66-000E0C4DEB4B.root",
"/store/unmerged/data/2007/3/18/TAC-TIBTOB-120-DAQ-EDM-CMSSW_1_3_0_pre5-DIGI-RECO-Run-00006354/DIGI-RECO/0000/2AEAEA25-A0D5-DB11-9489-000E0C3F0D35.root",
"/store/unmerged/data/2007/3/18/TAC-TIBTOB-120-DAQ-EDM-CMSSW_1_3_0_pre5-DIGI-RECO-Run-00006354/DIGI-RECO/0000/343F86D1-9FD5-DB11-88E6-000E0C4D3939.root",
"/store/unmerged/data/2007/3/18/TAC-TIBTOB-120-DAQ-EDM-CMSSW_1_3_0_pre5-DIGI-RECO-Run-00006354/DIGI-RECO/0000/5C0CAC38-A0D5-DB11-8A24-000E0C4D360C.root",
"/store/unmerged/data/2007/3/18/TAC-TIBTOB-120-DAQ-EDM-CMSSW_1_3_0_pre5-DIGI-RECO-Run-00006354/DIGI-RECO/0000/641209B8-A1D5-DB11-8394-000E0C4D34EF.root",
"/store/unmerged/data/2007/3/18/TAC-TIBTOB-120-DAQ-EDM-CMSSW_1_3_0_pre5-DIGI-RECO-Run-00006354/DIGI-RECO/0000/66BA20F1-A1D5-DB11-B113-00304856279C.root",
"/store/unmerged/data/2007/3/18/TAC-TIBTOB-120-DAQ-EDM-CMSSW_1_3_0_pre5-DIGI-RECO-Run-00006354/DIGI-RECO/0000/703BE1F4-A2D5-DB11-8A78-000E0C4D3118.root",
"/store/unmerged/data/2007/3/18/TAC-TIBTOB-120-DAQ-EDM-CMSSW_1_3_0_pre5-DIGI-RECO-Run-00006354/DIGI-RECO/0000/D8C87681-9FD5-DB11-86CB-000E0C4D34A3.root",
#run 6478:
"/store/unmerged/data/2007/3/18/TAC-TIBTOB-120-DAQ-EDM-CMSSW_1_3_0_pre5-DIGI-RECO-Run-00006478/DIGI-RECO/0000/18EAECB6-F6D5-DB11-9C04-000E0C3F13B4.root",
"/store/unmerged/data/2007/3/18/TAC-TIBTOB-120-DAQ-EDM-CMSSW_1_3_0_pre5-DIGI-RECO-Run-00006478/DIGI-RECO/0000/BEEC0C16-F7D5-DB11-95AE-0002B3D8EBC9.root",
"/store/unmerged/data/2007/3/18/TAC-TIBTOB-120-DAQ-EDM-CMSSW_1_3_0_pre5-DIGI-RECO-Run-00006478/DIGI-RECO/0000/C004F51D-F7D5-DB11-8B5D-000E0C3F0712.root",
"/store/unmerged/data/2007/3/18/TAC-TIBTOB-120-DAQ-EDM-CMSSW_1_3_0_pre5-DIGI-RECO-Run-00006478/DIGI-RECO/0000/DA2C282B-F7D5-DB11-BD99-000E0C4DECE4.root"
*/
		}
         }

  # magnetic field
#  include "Geometry/CMSCommonData/data/cmsMagneticFieldXML.cfi"
  include "MagneticField/Engine/data/uniformMagneticField.cfi"
  replace UniformMagneticFieldESProducer.ZFieldInTesla = 0.0
  es_prefer = UniformMagneticFieldESProducer{}

  # tracker geometry
  include "Geometry/TrackerGeometryBuilder/data/trackerGeometry.cfi"
 
  # tracker numbering
  include "Geometry/TrackerNumberingBuilder/data/trackerNumberingGeometry.cfi"
 
  # cms geometry
  include "Geometry/CMSCommonData/data/cmsIdealGeometryXML.cfi"


############# DQM
  # DQM services
  service = DaqMonitorROOTBackEnd{}

  # tracer service - very verbose - useful for debugging only
#  service = Tracer { untracked string indention = "$$"}

  # can comment out MonitorDeamon if you want to run without DQMCollector - this should go as include in DQMServices
#  include "DQM/SiStripMonitorCluster/data/MonitorDaemon.cfi"
##  replace MonitorDaemon.DestinationAddress = "localhost"
#  replace MonitorDaemon.DestinationAddress = "lxplus205"
#  replace MonitorDaemon.UpdateDelay = 1000

  # SiStripMonitorDigi
  include "DQM/SiStripMonitorDigi/data/SiStripMonitorDigi_RealData.cfi"
  # use the following flag to select all detectors (e.g. for mtcc data). by default is false
  replace SiStripMonitorDigi.SelectAllDetectors = false
  replace SiStripMonitorDigi.CalculateStripOccupancy = true

  # SiStripMonitorCluster
  include "DQM/SiStripMonitorCluster/data/SiStripMonitorCluster.cfi"
  # use the following flag to select all detectors (e.g. for mtcc data). by default is false
  replace SiStripMonitorCluster.FillSignalNoiseHistos = false
  replace SiStripMonitorCluster.OutputMEsInRootFile = true
  replace SiStripMonitorCluster.SelectAllDetectors = false

/*
  # event coordinates
  module eventInfoProvider = EventCoordinatesSource {
       untracked string eventInfoFolder = "EventInfo/"
       #"Collector/FU0/EventInfo"#
  }
*/



  #-------------------------------------------------
  ## CALIBRATION From Orcon
  #-------------------------------------------------

    ## CABLING
    include "CalibTracker/Configuration/data/SiStrip_FrontierCabling.cfi"
    replace siStripFedCabling.toGet={ { string record = "SiStripFedCablingRcd" string tag = "SiStripCabling_pass4_test_v1"} }
    replace siStripFedCabling.connect = "oracle://cms_orcoff_int2r/CMS_COND_STRIP"
    ## to use Frontier
    ## replace siStripFedCabling.connect = "frontier://FrontierDev/CMS_COND_STRIP" 
    replace siStripFedCabling.DBParameters.authenticationPath="/afs/cern.ch/cms/DB/conddb"

    ## PEDESTALS
    include "CalibTracker/Configuration/data/SiStrip_FrontierPedestals.cfi"
    replace siStripPedestals.toGet={   { string record = "SiStripPedestalsRcd"  string tag = "SiStripPedestals_pass4_test_v1_p"}  }
    replace siStripPedestals.connect = "oracle://cms_orcoff_int2r/CMS_COND_STRIP"
    ## to use Frontier
    ## replace siStripPedestals.connect = "frontier://FrontierDev/CMS_COND_STRIP"
    replace siStripPedestals.DBParameters.authenticationPath="/afs/cern.ch/cms/DB/conddb"

    ## NOISE
    include "CalibTracker/Configuration/data/SiStrip_FrontierNoise.cfi"
    replace siStripNoise.toGet={ { string record = "SiStripNoisesRcd"     string tag = "SiStripNoises_pass4_test_v1_n"} }
    replace siStripNoise.connect = "oracle://cms_orcoff_int2r/CMS_COND_STRIP"
    ## to use Frontier
    ## replace siStripNoise.connect = "frontier://FrontierDev/CMS_COND_STRIP"  
    replace siStripNoise.DBParameters.authenticationPath="/afs/cern.ch/cms/DB/conddb"

    ## GAIN
    # Gain in TBufferStream needs to be uploaded, for the time being use fake source       ## FAKE CONDITIONS
    include "CalibTracker/Configuration/data/SiStrip_FrontierGain.cfi"
    replace siStripApvGain.toGet={
         { string record = "SiStripApvGainRcd" string tag = "SiStripApvGain_TickMarksfromASCII_TBuffer_v1" } }
     replace siStripApvGain.connect = "frontier://FrontierDev/CMS_COND_STRIP"
  


  service = LockService {
    untracked vstring labels = { "source" }
  }

######################## Scheduling
  path p = {SiStripMonitorDigi,SiStripMonitorCluster}

}
