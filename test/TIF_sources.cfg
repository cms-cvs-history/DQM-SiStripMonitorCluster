process TIFDQMSOURCES = {
#keep the logging output to a nice level
include "FWCore/MessageLogger/data/MessageLogger.cfi"

service = AdaptorConfig {}

untracked PSet maxEvents = {untracked int32 input = 100}

        source = PoolSource { 
          	untracked vstring fileNames = {
        'rfio:/castor/cern.ch/cms/store/TAC/TIBTOB/edm_2007_03_07/tif.00006215.A.testStorageManager_0.0.root',
        'rfio:/castor/cern.ch/cms/store/TAC/TIBTOB/edm_2007_03_07/tif.00006215.A.testStorageManager_0.1.root',
        'rfio:/castor/cern.ch/cms/store/TAC/TIBTOB/edm_2007_03_07/tif.00006215.A.testStorageManager_0.2.root',
        'rfio:/castor/cern.ch/cms/store/TAC/TIBTOB/edm_2007_03_07/tif.00006215.A.testStorageManager_0.3.root',
        'rfio:/castor/cern.ch/cms/store/TAC/TIBTOB/edm_2007_03_07/tif.00006215.A.testStorageManager_0.4.root',
        'rfio:/castor/cern.ch/cms/store/TAC/TIBTOB/edm_2007_03_07/tif.00006215.A.testStorageManager_0.5.root',
        'rfio:/castor/cern.ch/cms/store/TAC/TIBTOB/edm_2007_03_07/tif.00006215.A.testStorageManager_0.6.root',
        'rfio:/castor/cern.ch/cms/store/TAC/TIBTOB/edm_2007_03_07/tif.00006215.A.testStorageManager_0.7.root',
        'rfio:/castor/cern.ch/cms/store/TAC/TIBTOB/edm_2007_03_07/tif.00006215.A.testStorageManager_0.8.root',
        'rfio:/castor/cern.ch/cms/store/TAC/TIBTOB/edm_2007_03_07/tif.00006215.A.testStorageManager_0.9.root',
        'rfio:/castor/cern.ch/cms/store/TAC/TIBTOB/edm_2007_03_07/tif.00006215.A.testStorageManager_0.10.root'

               }
         }

  # magnetic field
#  include "Geometry/CMSCommonData/data/cmsMagneticFieldXML.cfi"
  include "MagneticField/Engine/data/uniformMagneticField.cfi"
  replace UniformMagneticFieldESProducer.ZFieldInTesla = 0.0
  es_prefer = UniformMagneticFieldESProducer{}

  # tracker geometry
  include "Geometry/TrackerGeometryBuilder/data/trackerGeometry.cfi"
 
  # tracker numbering
  include "Geometry/TrackerNumberingBuilder/data/trackerNumberingGeometry.cfi"
 
  # cms geometry
  include "Geometry/CMSCommonData/data/cmsIdealGeometryXML.cfi"

  #-----------------------
  ####  Reconstruction Modules
  #-----------------------

  include "EventFilter/SiStripRawToDigi/data/SiStripDigis.cfi"
  replace SiStripDigis.ProductLabel="source"

  include "RecoLocalTracker/SiStripZeroSuppression/data/SiStripZeroSuppression.cfi"

  include "RecoLocalTracker/SiStripClusterizer/data/SiStripClusterizer_RealData.cfi"
  replace siStripClusters.SiStripQualityLabel="test1"


############# DQM
  # DQM services
  include "DQMServices/Core/data/DQM.cfg"

  # tracer service - very verbose - useful for debugging only
#  service = Tracer { untracked string indention = "$$"}

  # can comment out MonitorDeamon if you want to run without DQMCollector - this should go as include in DQMServices
#  include "DQM/SiStripMonitorCluster/data/MonitorDaemon.cfi"
##  replace MonitorDaemon.DestinationAddress = "localhost"
#  replace MonitorDaemon.DestinationAddress = "lxplus205"
#  replace MonitorDaemon.UpdateDelay = 1000

  # SiStripMonitorDigi
  include "DQM/SiStripMonitorDigi/data/SiStripMonitorDigi_RealData.cfi"
  # use the following flag to select all detectors (e.g. for mtcc data). by default is false
  replace SiStripMonitorDigi.SelectAllDetectors = false
  replace SiStripMonitorDigi.CalculateStripOccupancy = true

  # SiStripMonitorCluster
  include "DQM/SiStripMonitorCluster/data/SiStripMonitorCluster.cfi"
  # use the following flag to select all detectors (e.g. for mtcc data). by default is false
  replace SiStripMonitorCluster.FillSignalNoiseHistos = false
  replace SiStripMonitorCluster.OutputMEsInRootFile = true
  replace SiStripMonitorCluster.SelectAllDetectors = false

/*
  # event coordinates
  module eventInfoProvider = EventCoordinatesSource {
       untracked string eventInfoFolder = "EventInfo/"
       #"Collector/FU0/EventInfo"#
  }
*/



  #-------------------------------------------------
  ## CALIBRATION From Orcon or Frontier
  #-------------------------------------------------
  
    include "CalibTracker/Configuration/data/Tracker_FrontierConditions_TIF.cff"
    #include "CalibTracker/Configuration/data/Tracker_OrconConditions_TIF.cff"

    #If Frontier is used in xdaq environment use the following service
    ##    service = SiteLocalConfigService {}



  service = LockService {
    untracked vstring labels = { "source" }
  }

  #----------------------------
  #### Scheduling
  #-----------------------------

  sequence digitization   = {SiStripDigis,siStripZeroSuppression}
  sequence clusterization = {siStripClusters}

      
    path p = {digitization, clusterization, SiStripMonitorDigi,SiStripMonitorCluster}

}
